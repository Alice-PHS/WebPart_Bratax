@import '~@fluentui/react/dist/sass/References.scss';

/* --- 1. VARIÁVEIS CSS (Design System) --- */
:root {
  --smart-bg: #f3f5f8;       
  --smart-card: #ffffff;     
  --smart-primary: #0078d4;  
  --smart-accent: #2b88d8;   
  --smart-text: #323130;     
  --smart-text-soft: #605e5c;
  --smart-border: #e1dfdd;   
  --smart-hover: #f3f2f1;
  
  /* NOVAS VARIÁVEIS PARA A SIDEBAR */
  --smart-sidebar-bg: #ffffff;    /* Fundo da Barra Lateral */
  --smart-sidebar-text: #605e5c;  /* Texto da Barra Lateral */
}

/* --- CORREÇÃO DE ESPAÇAMENTO DA LISTA (DetailsList) - VERSÃO SEGURA --- */

/* 1. Ajusta a altura da linha do cabeçalho */
:global(.ms-DetailsHeader) {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  height: 42px !important;      /* Altura mais compacta */
  min-height: 42px !important;
  line-height: 42px !important; 
}

/* 2. Remove padding extra das células, mas NÃO muda o display */
:global(.ms-DetailsHeader-cell) {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  height: 42px !important;
  /* Importante: Não use display: flex aqui, pois quebra o cálculo de largura */
}

/* 3. Centraliza o texto verticalmente dentro do container do título */
:global(.ms-DetailsHeader-cellTitle) {
  height: 100% !important;
  display: flex !important;
  align-items: center !important; /* Isso centraliza o texto verticalmente */
  padding: 0 8px !important;      /* Espaçamento lateral para não grudar */
}

/* 4. Opcional: Ajusta o tamanho da fonte do cabeçalho */
:global(.ms-DetailsHeader-cellName) {
  font-weight: 600 !important;
  font-size: 13px !important;
  color: var(--smart-text);
}

/* --- 2. ESTRUTURA GLOBAL DA WEBPART --- */
.webPartArquivos {
  font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
  color: var(--smart-text);
  background-color: var(--smart-bg);
  height: calc(100vh - 50px);
  min-height: 700px;
  overflow: hidden;
  display: flex;
  box-sizing: border-box;

  * { box-sizing: border-box; }

  /* Títulos genéricos */
  h1, h2, h3, h4 { margin: 0; font-weight: 600; color: var(--smart-text); }
  
  .dashboardContainer {
    display: flex;
    width: 100%;
    height: 100%;
    
    /* --- BARRA LATERAL (SIDEBAR) --- */
    .sidebarContainer {
      width: 260px;
      min-width: 260px;
      
      /* AQUI APLICAMOS A VARIÁVEL DE COR DE FUNDO */
      background: var(--smart-sidebar-bg); 
      border-right: 1px solid var(--smart-border);
      
      display: flex;
      flex-direction: column;
      z-index: 10;
      
      .logoArea {
        height: 70px;
        display: flex;
        align-items: center;
        padding: 0 20px;
        /* Borda sutilmente transparente para funcionar em fundos escuros */
        border-bottom: 1px solid rgba(0,0,0,0.1);
        
        .customLogo { max-height: 40px; max-width: 100%; }

        .defaultLogo {
          display: flex; align-items: center; gap: 12px;
          .iconBox {
            width: 36px; height: 36px;
            background: var(--smart-primary);
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 18px;
          }
          .textBox {
            /* Texto do logo usa a cor de texto configurada para a sidebar */
            h2 { font-size: 15px; font-weight: 700; color: var(--smart-sidebar-text); }
            span { font-size: 11px; color: var(--smart-sidebar-text); opacity: 0.7; text-transform: uppercase; }
          }
        }
      }

      .navMenu {
        flex: 1;
        padding: 20px 12px;
        overflow-y: auto;

        scrollbar-width: thin; /* Para Firefox */
        scrollbar-color: rgba(0,0,0,0.1) transparent;

        &::-webkit-scrollbar {
          width: 4px; /* Largura bem fina */
        }
        
        &::-webkit-scrollbar-track {
          background: transparent; /* Fundo invisível */
        }
        
        &::-webkit-scrollbar-thumb {
          background-color: rgba(0,0,0,0.1); /* Cinza bem claro */
          border-radius: 10px; /* Arredondado */
        }
        
        /* Ao passar o mouse no scroll, ele fica da cor do tema */
        &::-webkit-scrollbar-thumb:hover {
          background-color: var(--smart-primary); 
        }

        .sectionTitle {
          display: block;
          font-size: 11px; 
          color: var(--smart-sidebar-text); /* Cor do texto */
          opacity: 0.6; /* Levemente apagado */
          font-weight: 700;
          text-transform: uppercase; letter-spacing: 0.8px;
          margin: 0px 12px 8px 12px;
        }

        .navItem {
          width: 100%;
          border: none; background: transparent;
          display: flex; align-items: center; gap: 12px;
          padding: 10px 14px;
          border-radius: 6px;
          cursor: pointer;
          font-size: 14px; font-weight: 500;
          
          /* Cor do texto do menu */
          color: var(--smart-sidebar-text);
          transition: all 0.2s;
          text-align: left;
          margin-bottom: 2px;

          i { font-size: 16px; width: 20px; text-align: center; }

          &:hover {
            /* Hover com transparência para funcionar em fundo claro ou escuro */
            background-color: rgba(0,0,0,0.05);
            color: var(--smart-primary);
          }

          &.active {
            /* Fundo ativo com a cor primária bem suave */
            background-color: rgba(var(--smart-primary), 0.1); 
            /* Fallback se a variável acima falhar: */
            background-color: rgba(0, 120, 212, 0.1);
            
            color: var(--smart-primary);
            font-weight: 600;
            
            i { color: var(--smart-primary); }
          }
        }
      }

      .userProfile {
        padding: 16px;
        /* Borda sutil */
        border-top: 1px solid rgba(0,0,0,0.1);
        display: flex; align-items: center; gap: 10px;
        
        /* Fundo levemente mais escuro/claro que a sidebar para destacar */
        background: rgba(0,0,0,0.02);

        .avatarCircle {
          width: 32px; height: 32px;
          border-radius: 50%;
          background: var(--smart-accent);
          color: white;
          display: flex; align-items: center; justify-content: center;
          font-weight: 600; font-size: 12px;
        }

        .userInfo {
          display: flex; flex-direction: column; overflow: hidden;
          strong { font-size: 13px; color: var(--smart-sidebar-text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
          span { font-size: 11px; color: var(--smart-sidebar-text); opacity: 0.8; }
        }
      }}

/* --- CORES DOS ÍCONES (Nível Raiz para Exportação) --- */
.blue { background: #eff6ff; color: #3b82f6; }
.purple { background: #faf5ff; color: #a855f7; }
.green { background: #f0fdf4; color: #22c55e; }
.yellow { background: #fefce8; color: #eab308; }

    /* --- ÁREA PRINCIPAL --- */
    .mainContent {
      flex: 1;
      display: flex; flex-direction: column;
      background-color: var(--smart-bg);
      position: relative; overflow: hidden;

      .topHeader {
        height: 70px;
        display: flex; align-items: center; justify-content: space-between;
        padding: 0 40px; flex-shrink: 0;

        h1 { font-size: 22px; font-weight: 700; color: var(--smart-text); }
      }

      .contentScrollable {
        flex: 1;
        padding: 0 40px 40px 40px;
        overflow-y: auto;

        scrollbar-width: thin;
        scrollbar-color: #c8c6c4 transparent;

        &::-webkit-scrollbar {
          width: 8px; /* Um pouco mais largo para facilitar o clique */
        }
        &::-webkit-scrollbar-track {
          background: transparent;
        }
        &::-webkit-scrollbar-thumb {
          background: #e1dfdd; /* Cinza claro */
          border-radius: 4px;
          border: 2px solid var(--smart-bg); /* Cria um efeito de "padding" ao redor da barra */
        }
        &::-webkit-scrollbar-thumb:hover {
          background: #a19f9d; /* Cinza mais escuro no hover */
        }
      }
    }
  }
}

/* --- 3. ESTILOS DA HOME SCREEN --- */
.homeContainer {
  /* Container fluido */
  width: 100%;
  animation: fadeIn 0.4s ease-out;
}

.topBar {
  margin-bottom: 24px;
  /* Classes auxiliares para alinhamento */
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.summarySection {
  display: flex;
  gap: 20px;
  margin-bottom: 30px;
  flex-wrap: wrap;

  .summaryCard {
    flex: 1;
    min-width: 220px;
    background: white;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    display: flex; align-items: center; gap: 16px;
    border: 1px solid transparent;
    transition: transform 0.2s, box-shadow 0.2s;

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.08);
      border-color: rgba(0,0,0,0.05);
    }

    .cardIcon {
      width: 50px; height: 50px;
      border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      font-size: 24px;

      /* Cores Temáticas para os Ícones */
      &.blue { background: #eff6ff; color: #3b82f6; }
      &.purple { background: #faf5ff; color: #a855f7; }
      &.green { background: #f0fdf4; color: #22c55e; }
      &.yellow { background: #fefce8; color: #eab308; }
    }

    .cardContent {
      display: flex; flex-direction: column;
      span { font-size: 13px; color: var(--smart-text-soft); font-weight: 500; }
      strong { font-size: 26px; color: var(--smart-text); font-weight: 700; line-height: 1.1; margin-top: 4px; }
    }
  }
}

/* Grid Principal (Layout 2 Colunas) */
.mainGrid {
  display: flex;
  gap: 24px;
  
  /* Define as colunas que estavam faltando */
  .leftColumn { 
    flex: 2; /* Ocupa 2/3 */
    min-width: 0; /* Evita estouro do flex */
  }
  
  .rightColumn { 
    flex: 1; /* Ocupa 1/3 */
    min-width: 300px;
    display: flex; flex-direction: column; gap: 24px; 
  }
}

/* Card Padrão de Conteúdo (Usado na Home, Explorer, etc) */
.contentCard {
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  border: 1px solid rgba(0,0,0,0.03);
  height: 100%; /* Para preencher a coluna */
  
  h3 { font-size: 16px; color: var(--smart-text); font-weight: 700; margin-bottom: 20px; }
}

/* Lista de Atividades (Home) */
.activityList {
  .activityItem {
    display: flex; align-items: center;
    padding: 14px 0;
    border-bottom: 1px solid #f3f2f1;
    
    &:last-child { border-bottom: none; }

    .activityInfo {
      margin-left: 12px;
      flex: 1;
      p { margin: 0; font-size: 13px; color: var(--smart-text); }
      .actionTag {
        display: inline-block;
        background-color: #f3f2f1;
        color: var(--smart-primary);
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 11px; font-weight: 600;
        text-transform: uppercase;
      }
      .fileName { font-size: 12px; color: var(--smart-text-soft); display: block; margin-top: 2px; }
    }
    .activityTime { font-size: 11px; color: #a19f9d; }
  }
}

/* Barra de Progresso (Home) */
.clientUsageItem {
  margin-bottom: 16px;
  .usageHeader {
    display: flex; justify-content: space-between;
    font-size: 13px; margin-bottom: 6px;
  }
}

/* --- 4. ESTILOS DO VIEWER / EXPLORER --- */

/* Header Padrão das Telas Internas */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  gap: 20px; /* Espaço entre o título/busca e os controles */
  
  .title { font-size: 20px; margin: 0; white-space: nowrap; }
  .subtitle { font-size: 13px; color: var(--smart-text-soft); }

  /* Container para os botões da direita (Refresh, Filtros, etc) */
  .headerControls {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-shrink: 0; /* Impede que os botões sejam esmagados */
  }
}

/* Container do Visualizador (Layout Árvore + Preview) */
.viewerLayout {
  display: flex;
  height: 650px;
  border: 1px solid var(--smart-border);
  border-radius: 8px;
  overflow: hidden;
  background: white;
  margin-top: 10px;

  /* Coluna da Árvore */
  .sidebar {
    width: 280px;
    border-right: 1px solid var(--smart-border);
    background: #fdfdfd;
    overflow-y: auto;
    
    .sidebarItem {
      padding: 8px 16px;
      cursor: pointer;
      display: flex; align-items: center;
      color: var(--smart-text);
      font-size: 13px; font-weight: 500;
      transition: background 0.1s;
      
      &:hover { background-color: #f0f0f0; }
    }

    .sidebarFile {
      padding: 8px 16px;
      cursor: pointer;
      display: flex; align-items: center;
      color: var(--smart-text-soft);
      font-size: 13px;
      
      &:hover { background-color: #f3f2f1; }
      
      &.activeFile {
        background-color: #eff6ff;
        color: var(--smart-primary);
        font-weight: 600;
        border-right: 3px solid var(--smart-primary);
      }
    }
  }
}

/* --- 5. UTILS --- */

/* Container genérico para telas que precisam de card branco */
.containerCard {
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

/* Inputs de Arquivo */
.uploadContainer {
  border: 2px dashed #b3b0ad;
  border-radius: 8px;
  padding: 40px;
  text-align: center;
  transition: all 0.2s;
  background-color: #faf9f8;
  position: relative;

  &:hover { 
    border-color: var(--smart-primary); 
    background-color: #eff6ff; 
  }
  .fileInput {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;         /* Torna invisível, mas clicável */
    cursor: pointer;
    z-index: 10;        /* Garante que fique por cima de tudo */
  }
}

/* Keyframes */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}